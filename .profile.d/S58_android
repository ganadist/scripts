# vim: syntax=sh ts=2 sw=2 sts=2 expandtab
# see https://android.googlesource.com/platform/tools/idea/+/studio-master-dev/bin/scripts/unix/idea.sh

ANDROID_HOME=${HOME}/tools/adt-bundle-linux-x86_64/sdk
ANDROID_NDK_ROOT=${ANDROID_HOME}/ndk-bundle
ANDROID_NDK_HOME=${ANDROID_NDK_ROOT}
ANDROID_EMULATOR_USE_SYSTEM_LIBS=1

JRE_LIST=(/usr/lib/jvm/intellij-jdk
  /usr/share/intellij-idea-ultimate-edition/jre64
  /usr/lib/jvm/java-8-jdk
  /usr/lib/jvm/java-8-openjdk
  /usr/lib/jvm/java-7-jdk
  /usr/lib/jvm/java-7-openjdk
  /usr/lib/jvm/java-8-openjdk-amd64
)

for D in ${JRE_LIST[@]}
do
  [ -d ${D} ] && STUDIO_JDK=${D} && unset D && break
done
unset JRE_LIST

find_studio_properties() {
  local VER=(3.0 2.5 2.4 2.3)
  local PLATFORM=(.AndroidStudio .AndroidStudioPreview)
  local STUDIO_HOME P V
  for P in ${PLATFORM[@]}
  do
    for V in ${VER[@]}
    do
      STUDIO_HOME=${P}${V}
      STUDIO_PROPERTIES="$HOME/$STUDIO_HOME/idea.properties"
      [ -f ${STUDIO_PROPERTIES} ] && export STUDIO_PROPERTIES && break
      unset STUDIO_PROPERTIES
    done
  done
}

#IBUS_ENABLE_SYNC_MODE=1

find_studio_properties

export ANDROID_HOME ANDROID_NDK_ROOT ANDROID_NDK_HOME STUDIO_JDK
export ANDROID_EMULATOR_USE_SYSTEM_LIBS
